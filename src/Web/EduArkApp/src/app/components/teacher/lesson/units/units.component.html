<section class="main-content">
	<p-confirmDialog
		[style]="{ width: '25vw' }"
		acceptButtonStyleClass="p-button-raised p-button-danger"
		rejectButtonStyleClass="p-button-raised p-button-success"
	></p-confirmDialog>

	<ul class="breadcrumb breadcrumb-style">
		<li class="breadcrumb-item">
			<h5 class="page-title m-b-0">LEARNING-PLAN</h5>
		</li>
		<li class="breadcrumb-item bcrumb-1">
			<a routerLink="/dashboard/main"> <i class="fas fa-home font-17"></i></a>
		</li>
		<li class="breadcrumb-item">LEARNING-PLAN</li>
	</ul>

	<hr />

	<div class="section-body">
		<div class="row clearfix">
			<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
				<div class="card">
					<div class="p-10">
						<div class="row">
							<div class="col-12">
								<div class="row m-0">
									<div class="col-12 p-0">
										<div class="ngxTableHeader">
											<div class="table-title">
												<ul class="breadcrumb breadcrumb-style">
													<li class="breadcrumb-item">
														<p></p>
														<h5 class="page-title m-b-0">ACADEMIC DETAILS</h5>
														<p>Teacher's Academic Class Details</p>
													</li>

													<li>
														<p></p>
														<div class="buttons" style="margin-left: 750px">
															<span>
																<p-tag severity="success" value="ADD NEW LESSON " class="btn btn-icon btn-sm"></p-tag>
																<button class="btn btn-icon btn-sm btn-success" (click)="navigationToTheLessonUnit(0)">
																	<i class="fa fa-plus"></i>
																</button>
															</span>
														</div>
													</li>
												</ul>
											</div>
										</div>

										<div class="col-12 p-0">
											<div class="row">
												<div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 ps-3 pe-3 pt-3">
													<div class="form-group">
														<label>Academic Level</label>
														<p-dropdown
															[options]="academicLevels"
															class="p-inputtext-sm"
															optionLabel="name"
															optionValue="id"
															[(ngModel)]="selectedAcademicLevelId"
															[ngModelOptions]="{ standalone: true }"
															[style]="{ width: '100%' }"
															placeholder="-All-"
															(onChange)="getSubjectsByAcademicLevelId()"
														>
															<div [style]="{ width: '100%' }">
																<ng-template let-item pTemplate="item">
																	{{ item.name }}
																</ng-template>
															</div>
														</p-dropdown>
													</div>
												</div>

												<div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 ps-3 pe-3 pt-3">
													<div class="form-group">
														<label> Subject</label>
														<p-dropdown
															[options]="subjects"
															class="p-inputtext-sm"
															optionLabel="name"
															optionValue="id"
															[(ngModel)]="selectedSubjectId"
															[ngModelOptions]="{ standalone: true }"
															[style]="{ width: '100%' }"
															placeholder="-All-"
															(onChange)="getLessonByFilter()"
														>
															<div [style]="{ width: '100%' }">
																<ng-template let-item pTemplate="item">
																	{{ item.name }}
																</ng-template>
															</div>
														</p-dropdown>
													</div>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
												<p-table
													[value]="listoflessons"
													[paginator]="true"
													[rows]="pageSize"
													[(first)]="currentPage"
													[lazy]="true"
													(onLazyLoad)="loadLessons($event)"
													[responsive]="true"
													currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
													[rowsPerPageOptions]="[10, 20, 50]"
													[totalRecords]="totalRecordCount"
													styleClass="p-datatable-gridlines p-datatable-sm"
												>
													<ng-template pTemplate="header">
														<tr>
															<th>
																<span> </span>
															</th>
															<th>Name</th>
															<th>Subject</th>
															<th>Academic Level</th>
														</tr>
													</ng-template>
													<ng-template pTemplate="body" let-lesson>
														<tr>
															<td>
																<div class="buttons">
																	<span>
																		<button class="btn btn-icon btn-sm btn-primary" (click)="navigationToTheLessonUnit(lesson.id)">
																			<i class="far fa-edit"></i> Edit
																		</button>

																		<button class="btn btn-icon btn-sm btn-danger" (click)="deleteLesson(lesson.id)">
																			<i class="far fa-trash-alt"></i> Delete
																		</button>
																	</span>
																</div>
															</td>
															<td>{{ lesson.lessonName }}</td>
															<td>{{ lesson.subjectName }}</td>
															<td>{{ lesson.academicLevelName }}</td>
														</tr>
													</ng-template>
												</p-table>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
