<section class="main-content">
	<ul class="breadcrumb breadcrumb-style">
		<li class="breadcrumb-item">
			<h5 class="page-title m-b-0">LEARNING-PLAN</h5>
		</li>
		<li class="breadcrumb-item bcrumb-1">
			<a routerLink="/dashboard/main"> <i class="fas fa-home font-17"></i></a>
		</li>
		<li class="breadcrumb-item">LEARNING-PLAN</li>
	</ul>

	<hr />

	<div class="section-body">
		<div class="row clearfix">
			<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
				<div class="card">
					<div class="p-10">
						<div class="row">
							<div class="col-12">
								<div class="row m-0">
									<div class="col-12 p-0">
										<div class="ngxTableHeader">
											<div class="table-title">
												<h2><strong>LESSON - ADD</strong></h2>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="row">
							<hr />
							<form [formGroup]="lessonUnitsAddForm" *ngIf="lessonUnitsAddForm">
								<div class="row">
									<div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
										<label>Lesson Name<span class="text-danger">*</span></label>
										<input
											type="text"
											class="p-inputtext-sm"
											placeholder="Lesson Name"
											formControlName="name"
											required
											[style]="{ width: '100%' }"
											pInputText
										/>
										<small
											class="form-text text-danger"
											*ngIf="!lessonUnitsAddForm.get('name').valid && lessonUnitsAddForm.get('name').touched"
										>
											Lesson name is required
										</small>
									</div>
									<div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
										<label>Academic Level<span class="text-danger">*</span></label>
										<p-dropdown
											[options]="academicLevels"
											class="p-inputtext-sm"
											optionLabel="name"
											optionValue="id"
											formControlName="academicLevelId"
											[style]="{ width: '100%' }"
											placeholder="-All-"
											(onChange)="getSubjectsByAcademicLevelId()"
										>
											<div [style]="{ width: '100%' }">
												<ng-template let-item pTemplate="item">
													{{ item.name }}
												</ng-template>
											</div>
										</p-dropdown>
										<small
											class="form-text text-danger"
											*ngIf="
												!lessonUnitsAddForm.get('academicLevelId').valid &&
												lessonUnitsAddForm.get('academicLevelId').touched
											"
										>
											Academic Level is required
										</small>
									</div>
									<div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
										<label>Subject <span class="text-danger">*</span></label>
										<p-dropdown
											[options]="subjects"
											class="p-inputtext-sm"
											optionLabel="name"
											optionValue="id"
											formControlName="subjectId"
											[style]="{ width: '100%' }"
											placeholder="-All-"
										>
											<div [style]="{ width: '100%' }">
												<ng-template let-item pTemplate="item">
													{{ item.name }}
												</ng-template>
											</div>
										</p-dropdown>
										<small
											class="form-text text-danger"
											*ngIf="!lessonUnitsAddForm.get('subjectId').valid && lessonUnitsAddForm.get('subjectId').touched"
										>
											Lesson Subject is required	
										</small>
									</div>
									<div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
										<label>Lesson Description<span class="text-danger">*</span></label>
										<input
											type="text"
											class="p-inputtext-sm"
											placeholder="Lesson Name"
											formControlName="description"
											required
											[style]="{ width: '100%' }"
											pInputText
										/>

										<small
											class="form-text text-danger"
											*ngIf="
												!lessonUnitsAddForm.get('description').valid && lessonUnitsAddForm.get('description').touched
											"
										>
											Lesson Description is required
										</small>
									</div>

									<div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2" *ngIf="lessonId > 0">
										<label for="formFile" class="form-label"
											>Only audio file
											<span class="text-danger">*</span>
										</label>
										<input
											class="form-control"
											type="file"
											id="formFile"
											name="mp3"
											(change)="onFileChange($event, lessonFileType.Audio)"
										/>
									</div>

									<div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2" *ngIf="lessonId > 0">
										<label for="formFile" class="form-label"
											>Only Video files
											<span class="text-danger">*</span>
										</label>
										<input
											class="form-control"
											type="file"
											id="formFile"
											name="mp3"
											(change)="onFileChange($event, lessonFileType.Video)"
										/>
									</div>

									<div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2" *ngIf="lessonId > 0">
										<label for="formFile" class="form-label"
											>only Text File
											<span class="text-danger">*</span>
										</label>
										<input
											class="form-control"
											type="file"
											id="formFile"
											name="mp3"
											(change)="onFileChange($event, 1)"
										/>
									</div>
								</div>

								<div class="row mt-2 mb-4">
									<div class="text-right">
										<button type="submit" class="btn btn-primary float-right" (click)="saveLessonUnit()">
											{{ id === 0 ? 'Save Lesson' : 'Update Lesson' }}
										</button>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
